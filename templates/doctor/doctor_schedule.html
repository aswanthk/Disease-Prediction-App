{% extends 'doctor/doctor_home.html' %}
{#<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">#}
{#<html xmlns="http://www.w3.org/1999/xhtml">#}
{#<head>#}
{#<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />#}
{#<title>Untitled Document</title>#}
{#</head>#}
{##}
{#<body>#}


{% block body %}
    <h2>Doctor Schedule Management</h2>

    <div class="card-header py-3">
                        	<div class="row">
                            	<div class="col">
                            		<h6 class="m-0 font-weight-bold text-primary">Doctor Schedule List</h6>
                            	</div>
                            	<div class="col" align="right">
{#                            		<button type="button" name="add_exam" id="add_doctor_schedule" class="btn btn-success btn-circle btn-sm"><i class="fas fa-plus"></i></button>#}
                            	    <p><a href="/doctor_schedule_add"><button>Add</button></a></p>
                                </div>
                            </div>
                        </div>
    <div class="card-body">
        <table class="table-responsive">
            <table class="table table-striped table-bordered" width="510" border="2" cellspacing="2" cellpadding="2">
  <tr>
    <th width="66" scope="col">Schedule Date</th>
    <th width="64" scope="col">Schedule Day</th>
    <th width="74" scope="col">Start Time</th>
    <th width="71" scope="col">End Time</th>
    <th width="52" scope="col">Action</th>
  </tr>
  {% for data in qry %}
      <tr>
    <td>{{ data["schedule_date"] }}</td>
    <td>{{ data["schedule_day"] }}</td>
    <td>{{ data["start_time"] }}</td>
    <td>{{ data["end_time"] }}</td>
    <td><p><a href="#">Edit</a></p>
    <p><a href="/doctor/schedule/rm/{{ data['schedule_id'] }}">Remove</a></p></td>
  </tr>
  {% endfor %}
    </table>
</table>
{% endblock body %}


{#</body>#}
{#</html>#}


{#{% block body %}#}
{##}
{#<body id="page-top">#}
{##}
{#    <!-- Page Wrapper -->#}
{#    <div id="wrapper">#}
{#        <!-- Content Wrapper -->#}
{#        <div id="content-wrapper" class="d-flex flex-column">#}
{##}
{#            <!-- Main Content -->#}
{#            <div id="content">#}
{##}
{#                <!-- Begin Page Content -->#}
{#                <div class="container-fluid">#}
{#                    <br />#}
{#                    <br />#}
{#                    <!-- Page Heading -->#}
{#                    <h1 class="h3 mb-4 text-gray-800">Doctor Schedule Management</h1>#}
{##}
{#                    <!-- DataTales Example -->#}
{#                    <span id="message"></span>#}
{#                    <div class="card shadow mb-4">#}
{#                        <div class="card-header py-3">#}
{#                        	<div class="row">#}
{#                            	<div class="col">#}
{#                            		<h6 class="m-0 font-weight-bold text-primary">Doctor Schedule List</h6>#}
{#                            	</div>#}
{#                            	<div class="col" align="right">#}
{#                            		<button type="button" name="add_exam" id="add_doctor_schedule" class="btn btn-success btn-circle btn-sm"><i class="fas fa-plus"></i></button>#}
{#                            	</div>#}
{#                            </div>#}
{#                        </div>#}
{#                        <div class="card-body">#}
{#                            <div class="table-responsive">#}
{#                                <table class="table table-bordered" id="doctor_schedule_table" width="100%" cellspacing="0">#}
{#                                    <thead>#}
{#                                        <tr>#}
{#                                            <th>Schedule Date</th>#}
{#                                            <th>Schedule Day</th>#}
{#                                            <th>Start Time</th>#}
{#                                            <th>End Time</th>#}
{#                                            <th>Status</th>#}
{#                                            <th>Action</th>#}
{#                                        </tr>#}
{#                                    </thead>#}
{#                                    <tbody>#}
{#                                        {% for data in qry %}#}
{#                                        <tr>#}
{#                                            <td>{{ data["schedule_date"] }}</td>#}
{#                                            <td>{{ data["schedule_day"] }}</td>#}
{#                                            <td>{{ data["start_time"] }}</td>#}
{#                                            <td>{{ data["end_time"] }}</td>#}
{#                                            <td>{{ data["status"] }}</td>#}
{#                                            <td><p><a href="#">Edit</a></p>#}
{#                                            <p><a href="#">Remove</a></p></td>#}
{#                                        </tr>#}
{#                                    {% endfor %}s#}
{#                                    </tbody>#}
{#                                </table>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                                </div>#}
{#                <!-- /.container-fluid -->#}
{##}
{#            </div>#}
{#            <!-- End of Main Content -->#}
{##}
{#            <!-- Footer -->#}
{#            <footer class="sticky-footer bg-white">#}
{#                <div class="container my-auto">#}
{#                    <div class="copyright text-center my-auto">#}
{#                        <span>Copyright &copy; Webslesson 2021</span>#}
{#                    </div>#}
{#                </div>#}
{#            </footer>#}
{#            <!-- End of Footer -->#}
{##}
{#        </div>#}
{#        <!-- End of Content Wrapper -->#}
{##}
{#    </div>#}
{#    <!-- End of Page Wrapper -->#}
{##}
{#    <!-- Scroll to Top Button-->#}
{#    <a class="scroll-to-top rounded" href="#page-top">#}
{#        <i class="fas fa-angle-up"></i>#}
{#    </a>#}
{##}
{#    <!-- Logout Modal-->#}
{#    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"#}
{#        aria-hidden="true">#}
{#        <div class="modal-dialog" role="document">#}
{#            <div class="modal-content">#}
{#                <div class="modal-header">#}
{#                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>#}
{#                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">#}
{#                        <span aria-hidden="true">Ã—</span>#}
{#                    </button>#}
{#                </div>#}
{#                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>#}
{#                <div class="modal-footer">#}
{#                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>#}
{#                    <a class="btn btn-primary" href="logout.php">Logout</a>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{##}
{#    <!-- Bootstrap core JavaScript-->#}
{#    <script src="static/vendor/jquery/jquery.min.js"></script>#}
{#    <script src="static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>#}
{##}
{#    <!-- Core plugin JavaScript-->#}
{#    <script src="static/vendor/jquery-easing/jquery.easing.min.js"></script>#}
{##}
{#    <!-- Custom scripts for all pages-->#}
{#    <script src="static/js/js/sb-admin-2.min.js"></script>#}
{##}
{#    <!-- Page level plugins -->#}
{#    <script src="static/vendor/datatables/jquery.dataTables.min.js"></script>#}
{#    <script src="static/vendor/datatables/dataTables.bootstrap4.min.js"></script>#}
{##}
{#    <script type="text/javascript" src="static/vendor/parsley/dist/parsley.min.js"></script>#}
{##}
{#    <script type="text/javascript" src="static/vendor/bootstrap-select/bootstrap-select.min.js"></script>#}
{##}
{#    <script type="text/javascript" src="static/vendor/datepicker/bootstrap-datepicker.js"></script>#}
{##}
{#</body>#}
{##}
{##}
{##}
{#    <div id="doctor_scheduleModal" class="modal fade">#}
{#  	<div class="modal-dialog">#}
{#    	<form method="post" id="doctor_schedule_form">#}
{#      		<div class="modal-content">#}
{#        		<div class="modal-header">#}
{#          			<h4 class="modal-title" id="modal_title">Add Doctor Schedule</h4>#}
{#          			<button type="button" class="close" data-dismiss="modal">&times;</button>#}
{#        		</div>#}
{#        		<div class="modal-body">#}
{#        			<span id="form_message"></span>#}
{#                                        <div class="form-group">#}
{#                        <label>Schedule Date</label>#}
{#                        <div class="input-group">#}
{#                            <div class="input-group-prepend">#}
{#                                <span class="input-group-text" id="basic-addon1"><i class="fa fa-calendar"></i></span>#}
{#                            </div>#}
{#                            <input type="text" name="doctor_schedule_date" id="doctor_schedule_date" class="form-control" required readonly />#}
{#                        </div>#}
{#                    </div>#}
{#		          	<div class="form-group">#}
{#		          		<label>Start Time</label>#}
{#                        <div class="input-group">#}
{#                            <div class="input-group-prepend">#}
{#                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-clock"></i></span>#}
{#                            </div>#}
{#		          		    <input type="text" name="doctor_schedule_start_time" id="doctor_schedule_start_time" class="form-control datetimepicker-input" data-toggle="datetimepicker" data-target="#doctor_schedule_start_time" required onkeydown="return false" onpaste="return false;" ondrop="return false;" autocomplete="off" />#}
{#                        </div>#}
{#		          	</div>#}
{#                    <div class="form-group">#}
{#                        <label>End Time</label>#}
{#                        <div class="input-group">#}
{#                            <div class="input-group-prepend">#}
{#                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-clock"></i></span>#}
{#                            </div>#}
{#                            <input type="text" name="doctor_schedule_end_time" id="doctor_schedule_end_time" class="form-control datetimepicker-input" data-toggle="datetimepicker" data-target="#doctor_schedule_end_time" required onkeydown="return false" onpaste="return false;" ondrop="return false;" autocomplete="off" />#}
{#                        </div>#}
{#                    </div>#}
{#                    <div class="form-group">#}
{#                        <label>Average Consulting Time</label>#}
{#                        <div class="input-group">#}
{#                            <div class="input-group-prepend">#}
{#                                <span class="input-group-text" id="basic-addon1"><i class="fas fa-clock"></i></span>#}
{#                            </div>#}
{#                            <select name="average_consulting_time" id="average_consulting_time" class="form-control" required>#}
{#                                <option value="">Select Consulting Duration</option>#}
{#                                <option value="5">5 Minute</option><option value="10">10 Minute</option><option value="15">15 Minute</option><option value="20">20 Minute</option><option value="25">25 Minute</option><option value="30">30 Minute</option><option value="35">35 Minute</option><option value="40">40 Minute</option><option value="45">45 Minute</option><option value="50">50 Minute</option><option value="55">55 Minute</option><option value="60">60 Minute</option><option value="65">65 Minute</option><option value="70">70 Minute</option><option value="75">75 Minute</option>                            </select>#}
{#                        </div>#}
{#                    </div>#}
{#        		</div>#}
{#        		<div class="modal-footer">#}
{#          			<input type="hidden" name="hidden_id" id="hidden_id" />#}
{#          			<input type="hidden" name="action" id="action" value="Add" />#}
{#          			<input type="submit" name="submit" id="submit_button" class="btn btn-success" value="Add" />#}
{#          			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>#}
{#        		</div>#}
{#      		</div>#}
{#    	</form>#}
{#  	</div>#}
{#</div>#}
{##}
{#<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.0/moment.min.js"></script>#}
{#<script src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/js/tempusdominus-bootstrap-4.min.js" integrity="sha512-k6/Bkb8Fxf/c1Tkyl39yJwcOZ1P4cRrJu77p83zJjN2Z55prbFHxPs9vN7q3l3+tSMGPDdoH51AEU8Vgo1cgAA==" crossorigin="anonymous"></script>#}
{#<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/css/tempusdominus-bootstrap-4.min.css" integrity="sha512-3JRrEUwaCkFUBLK1N8HehwQgu8e23jTH4np5NHOmQOobuC4ROQxFwFgBLTnhcnQRMs84muMh0PnnwXlPq5MGjg==" crossorigin="anonymous" />#}
{##}
{#<script>#}
{#$(document).ready(function(){#}
{##}
{#	var dataTable = $('#doctor_schedule_table').DataTable({#}
{#		"processing" : true,#}
{#		"serverSide" : true,#}
{#		"order" : [],#}
{#		"ajax" : {#}
{#			url:"doctor_schedule_action.php",#}
{#			type:"POST",#}
{#			data:{action:'fetch'}#}
{#		},#}
{#		"columnDefs":[#}
{#			{#}
{#                                "targets":[5, 6],#}
{##}
{#				"orderable":false,#}
{#			},#}
{#		],#}
{#	});#}
{##}
{#    var date = new Date();#}
{#    date.setDate(date.getDate());#}
{##}
{#    $('#doctor_schedule_date').datepicker({#}
{#        startDate: date,#}
{#        format: "yyyy-mm-dd",#}
{#        autoclose: true#}
{#    });#}
{##}
{#    $('#doctor_schedule_start_time').datetimepicker({#}
{#        format: 'HH:mm'#}
{#    });#}
{##}
{#    $('#doctor_schedule_end_time').datetimepicker({#}
{#        useCurrent: false,#}
{#        format: 'HH:mm'#}
{#    });#}
{##}
{#    $("#doctor_schedule_start_time").on("change.datetimepicker", function (e) {#}
{#        console.log('test');#}
{#        $('#doctor_schedule_end_time').datetimepicker('minDate', e.date);#}
{#    });#}
{##}
{#    $("#doctor_schedule_end_time").on("change.datetimepicker", function (e) {#}
{#        $('#doctor_schedule_start_time').datetimepicker('maxDate', e.date);#}
{#    });#}
{##}
{#	$('#add_doctor_schedule').click(function(){#}
{##}
{#		$('#doctor_schedule_form')[0].reset();#}
{##}
{#		$('#doctor_schedule_form').parsley().reset();#}
{##}
{#    	$('#modal_title').text('Add Doctor Schedule Data');#}
{##}
{#    	$('#action').val('Add');#}
{##}
{#    	$('#submit_button').val('Add');#}
{##}
{#    	$('#doctor_scheduleModal').modal('show');#}
{##}
{#    	$('#form_message').html('');#}
{##}
{#	});#}
{##}
{#	$('#doctor_schedule_form').parsley();#}
{##}
{#	$('#doctor_schedule_form').on('submit', function(event){#}
{#		event.preventDefault();#}
{#		if($('#doctor_schedule_form').parsley().isValid())#}
{#		{#}
{#			$.ajax({#}
{#				url:"doctor_schedule_action.php",#}
{#				method:"POST",#}
{#				data:$(this).serialize(),#}
{#				dataType:'json',#}
{#				beforeSend:function()#}
{#				{#}
{#					$('#submit_button').attr('disabled', 'disabled');#}
{#					$('#submit_button').val('wait...');#}
{#				},#}
{#				success:function(data)#}
{#				{#}
{#					$('#submit_button').attr('disabled', false);#}
{#					if(data.error != '')#}
{#					{#}
{#						$('#form_message').html(data.error);#}
{#						$('#submit_button').val('Add');#}
{#					}#}
{#					else#}
{#					{#}
{#						$('#doctor_scheduleModal').modal('hide');#}
{#						$('#message').html(data.success);#}
{#						dataTable.ajax.reload();#}
{##}
{#						setTimeout(function(){#}
{##}
{#				            $('#message').html('');#}
{##}
{#				        }, 5000);#}
{#					}#}
{#				}#}
{#			})#}
{#		}#}
{#	});#}
{##}
{#	$(document).on('click', '.edit_button', function(){#}
{##}
{#		var doctor_schedule_id = $(this).data('id');#}
{##}
{#		$('#doctor_schedule_form').parsley().reset();#}
{##}
{#		$('#form_message').html('');#}
{##}
{#		$.ajax({#}
{##}
{#	      	url:"doctor_schedule_action.php",#}
{##}
{#	      	method:"POST",#}
{##}
{#	      	data:{doctor_schedule_id:doctor_schedule_id, action:'fetch_single'},#}
{##}
{#	      	dataType:'JSON',#}
{##}
{#	      	success:function(data)#}
{#	      	{#}
{#                	        	$('#doctor_schedule_date').val(data.doctor_schedule_date);#}
{##}
{#                $('#doctor_schedule_start_time').val(data.doctor_schedule_start_time);#}
{##}
{#                $('#doctor_schedule_end_time').val(data.doctor_schedule_end_time);#}
{##}
{#	        	$('#modal_title').text('Edit Doctor Schedule Data');#}
{##}
{#	        	$('#action').val('Edit');#}
{##}
{#	        	$('#submit_button').val('Edit');#}
{##}
{#	        	$('#doctor_scheduleModal').modal('show');#}
{##}
{#	        	$('#hidden_id').val(doctor_schedule_id);#}
{##}
{#	      	}#}
{##}
{#	    })#}
{##}
{#	});#}
{##}
{#	$(document).on('click', '.status_button', function(){#}
{#		var id = $(this).data('id');#}
{#    	var status = $(this).data('status');#}
{#		var next_status = 'Active';#}
{#		if(status == 'Active')#}
{#		{#}
{#			next_status = 'Inactive';#}
{#		}#}
{#		if(confirm("Are you sure you want to "+next_status+" it?"))#}
{#    	{#}
{##}
{#      		$.ajax({#}
{##}
{#        		url:"doctor_schedule_action.php",#}
{##}
{#        		method:"POST",#}
{##}
{#        		data:{id:id, action:'change_status', status:status, next_status:next_status},#}
{##}
{#        		success:function(data)#}
{#        		{#}
{##}
{#          			$('#message').html(data);#}
{##}
{#          			dataTable.ajax.reload();#}
{##}
{#          			setTimeout(function(){#}
{##}
{#            			$('#message').html('');#}
{##}
{#          			}, 5000);#}
{##}
{#        		}#}
{##}
{#      		})#}
{##}
{#    	}#}
{#	});#}
{##}
{#	$(document).on('click', '.delete_button', function(){#}
{##}
{#    	var id = $(this).data('id');#}
{##}
{#    	if(confirm("Are you sure you want to remove it?"))#}
{#    	{#}
{##}
{#      		$.ajax({#}
{##}
{#        		url:"doctor_schedule_action.php",#}
{##}
{#        		method:"POST",#}
{##}
{#        		data:{id:id, action:'delete'},#}
{##}
{#        		success:function(data)#}
{#        		{#}
{##}
{#          			$('#message').html(data);#}
{##}
{#          			dataTable.ajax.reload();#}
{##}
{#          			setTimeout(function(){#}
{##}
{#            			$('#message').html('');#}
{##}
{#          			}, 5000);#}
{##}
{#        		}#}
{##}
{#      		})#}
{##}
{#    	}#}
{##}
{#  	});#}
{##}
{#});#}
{#</script>#}
{##}
{#{% endblock %}#}
{##}
{##}





{#</table>#}
{##}
{#</body>#}
{#</html>#}
